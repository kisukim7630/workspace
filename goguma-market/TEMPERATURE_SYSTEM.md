# ğŸŒ¡ï¸ ì˜¨ë„ ì‹œìŠ¤í…œ ê°€ì´ë“œ

ë‹¹ê·¼ë§ˆì¼“ ìŠ¤íƒ€ì¼ì˜ ì‚¬ìš©ì ì˜¨ë„ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸ“‹ ì„¤ì • ë°©ë²•

### 1. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

Supabase SQL Editorì—ì„œ ë‹¤ìŒ ìˆœì„œë¡œ ì‹¤í–‰:

1. **ì˜¨ë„ ì»¬ëŸ¼ ì¶”ê°€**: `supabase/add-temperature.sql` ì‹¤í–‰
2. **ë¦¬ë·° í…Œì´ë¸” ìƒì„±**: `supabase/reviews.sql` ì‹¤í–‰

### 2. ì‹¤í–‰ ìˆœì„œ

```sql
-- Step 1: ì˜¨ë„ ì»¬ëŸ¼ ì¶”ê°€
-- supabase/add-temperature.sql íŒŒì¼ ë‚´ìš© ì‹¤í–‰

-- Step 2: ë¦¬ë·° í…Œì´ë¸” ìƒì„±
-- supabase/reviews.sql íŒŒì¼ ë‚´ìš© ì‹¤í–‰
```

## ğŸŒ¡ï¸ ì˜¨ë„ ì‹œìŠ¤í…œ ê·œì¹™

### ê¸°ë³¸ ì˜¨ë„
- **ì´ˆê¸° ì˜¨ë„**: 36.0ë„ (ì •ìƒ ì²´ì˜¨)
- **ì˜¨ë„ ë²”ìœ„**: 0ë„ ~ 100ë„

### ì˜¨ë„ ì¦ê°€/ê°ì†Œ ê·œì¹™

#### 1. ê±°ë˜ ì™„ë£Œ
- **íŒë§¤ì**: ê±°ë˜ ì™„ë£Œ ì‹œ **+1ë„** ì¦ê°€
- **êµ¬ë§¤ì**: ê±°ë˜ ì™„ë£Œ ì‹œ **+1ë„** ì¦ê°€ (í–¥í›„ ì¶”ê°€ ê°€ëŠ¥)

#### 2. ë¦¬ë·° ì‘ì„±
- **5ì  ë¦¬ë·°**: **+2ë„** ì¦ê°€
- **4ì  ë¦¬ë·°**: **+1ë„** ì¦ê°€
- **3ì  ë¦¬ë·°**: **0ë„** (ë³€í™” ì—†ìŒ)
- **2ì  ë¦¬ë·°**: **-1ë„** ê°ì†Œ
- **1ì  ë¦¬ë·°**: **-2ë„** ê°ì†Œ

#### 3. ë¦¬ë·° ìˆ˜ì •
- ë¦¬ë·° í‰ì  ë³€ê²½ ì‹œ ì°¨ì´ë§Œí¼ ì˜¨ë„ ì¡°ì •
- ì˜ˆ: 3ì  â†’ 5ì  ë³€ê²½ ì‹œ +2ë„ ì¦ê°€

#### 4. ë¦¬ë·° ì‚­ì œ
- ì‚­ì œëœ ë¦¬ë·°ì˜ í‰ì ì— ë”°ë¼ ì˜¨ë„ ê°ì†Œ

## ğŸ¨ ì˜¨ë„ë³„ í‘œì‹œ

### ì˜¨ë„ êµ¬ê°„ë³„ ìƒ‰ìƒ ë° ì•„ì´ì½˜

| ì˜¨ë„ | ìƒ‰ìƒ | ì•„ì´ì½˜ | ë¼ë²¨ | ì˜ë¯¸ |
|------|------|--------|------|------|
| 70ë„ ì´ìƒ | ğŸ”´ ë¹¨ê°„ìƒ‰ | ğŸ”¥ | ë§¤ìš° ë”°ëœ» | ì‹ ë¢°ë„ ë§¤ìš° ë†’ìŒ |
| 50~69ë„ | ğŸŸ  ì£¼í™©ìƒ‰ | ğŸŒ¡ï¸ | ë”°ëœ» | ì‹ ë¢°ë„ ë†’ìŒ |
| 36~49ë„ | ğŸŸ¡ ë…¸ë€ìƒ‰ | ğŸŒ¤ï¸ | ë³´í†µ | ì¼ë°˜ ì‚¬ìš©ì |
| 20~35ë„ | ğŸ”µ íŒŒë€ìƒ‰ | â„ï¸ | ì°¨ê°‘ | ì‹ ë¢°ë„ ë‚®ìŒ |
| 20ë„ ë¯¸ë§Œ | âš« íšŒìƒ‰ | ğŸ§Š | ë§¤ìš° ì°¨ê°‘ | ì‹ ë¢°ë„ ë§¤ìš° ë‚®ìŒ |

## ğŸ“Š ì˜¨ë„ ê³„ì‚° ì˜ˆì‹œ

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì‹ ê·œ ì‚¬ìš©ì
```
ì´ˆê¸° ì˜¨ë„: 36.0ë„
ê±°ë˜ ì™„ë£Œ 1íšŒ: +1ë„ â†’ 37.0ë„
5ì  ë¦¬ë·° ë°›ìŒ: +2ë„ â†’ 39.0ë„
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: í™œë°œí•œ íŒë§¤ì
```
ì´ˆê¸° ì˜¨ë„: 36.0ë„
ê±°ë˜ ì™„ë£Œ 10íšŒ: +10ë„ â†’ 46.0ë„
5ì  ë¦¬ë·° 5ê°œ: +10ë„ â†’ 56.0ë„
4ì  ë¦¬ë·° 3ê°œ: +3ë„ â†’ 59.0ë„
â†’ ìµœì¢…: 59.0ë„ (ë”°ëœ»)
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: ë¬¸ì œ ìˆëŠ” ì‚¬ìš©ì
```
ì´ˆê¸° ì˜¨ë„: 36.0ë„
ê±°ë˜ ì™„ë£Œ 2íšŒ: +2ë„ â†’ 38.0ë„
1ì  ë¦¬ë·° 3ê°œ: -6ë„ â†’ 32.0ë„
â†’ ìµœì¢…: 32.0ë„ (ì°¨ê°‘)
```

## ğŸ” ì˜¨ë„ í™•ì¸ ë°©ë²•

### í”„ë¡œí•„ í˜ì´ì§€
- ì‚¬ìš©ì í”„ë¡œí•„ í˜ì´ì§€ì—ì„œ ì˜¨ë„ í‘œì‹œ
- ì˜¨ë„ ì˜†ì— ì•„ì´ì½˜ê³¼ ë¼ë²¨ í‘œì‹œ

### SQL ì¿¼ë¦¬
```sql
-- ì‚¬ìš©ì ì˜¨ë„ ì¡°íšŒ
SELECT 
  id,
  nickname,
  temperature,
  email
FROM profiles
ORDER BY temperature DESC
LIMIT 10;

-- ì˜¨ë„ í†µê³„
SELECT 
  ROUND(AVG(temperature), 1) as avg_temp,
  MAX(temperature) as max_temp,
  MIN(temperature) as min_temp,
  COUNT(*) as total_users
FROM profiles;
```

## ğŸ› ï¸ API ì‚¬ìš©

### ë¦¬ë·° ì‘ì„±
```typescript
POST /api/reviews
{
  "orderId": "order_xxx",
  "productId": "product_xxx",
  "revieweeId": "user_xxx",
  "rating": 5,
  "comment": "ì¢‹ì€ ê±°ë˜ì˜€ìŠµë‹ˆë‹¤!",
  "reviewType": "êµ¬ë§¤ì" // ë˜ëŠ” "íŒë§¤ì"
}
```

### ë¦¬ë·° ì¡°íšŒ
```typescript
GET /api/reviews?userId=user_xxx
GET /api/reviews?orderId=order_xxx
```

## âš™ï¸ ê³ ê¸‰ ì„¤ì •

### ì˜¨ë„ ì¦ê°€ëŸ‰ ì¡°ì •
`supabase/add-temperature.sql` íŒŒì¼ì—ì„œ ìˆ˜ì •:

```sql
-- ê±°ë˜ ì™„ë£Œ ì‹œ ì˜¨ë„ ì¦ê°€ëŸ‰ ë³€ê²½
UPDATE profiles
SET temperature = LEAST(100, temperature + 2)  -- +2ë„ë¡œ ë³€ê²½
WHERE id = ...
```

### ë¦¬ë·° í‰ì ë³„ ì˜¨ë„ ë³€í™”ëŸ‰ ì¡°ì •
`supabase/reviews.sql` íŒŒì¼ì—ì„œ ìˆ˜ì •:

```sql
-- 5ì  ë¦¬ë·° ì‹œ ì˜¨ë„ ì¦ê°€ëŸ‰ ë³€ê²½
temperature_increase := CASE NEW.rating
  WHEN 5 THEN 3  -- +3ë„ë¡œ ë³€ê²½
  ...
END;
```

## ğŸ“ˆ ì˜¨ë„ ê´€ë¦¬ íŒ

### 1. ì •ê¸° ì ê²€
```sql
-- ì˜¨ë„ê°€ ë¹„ì •ìƒì ìœ¼ë¡œ ë†’ê±°ë‚˜ ë‚®ì€ ì‚¬ìš©ì í™•ì¸
SELECT * FROM profiles
WHERE temperature > 80 OR temperature < 20;
```

### 2. ì˜¨ë„ ë¦¬ì…‹ (í•„ìš”ì‹œ)
```sql
-- ëª¨ë“  ì‚¬ìš©ì ì˜¨ë„ë¥¼ 36ë„ë¡œ ë¦¬ì…‹
UPDATE profiles SET temperature = 36;
```

### 3. ì˜¨ë„ ì¬ê³„ì‚°
```sql
-- ë¦¬ë·° ê¸°ë°˜ìœ¼ë¡œ ì˜¨ë„ ì¬ê³„ì‚°
UPDATE profiles p
SET temperature = 36 + (
  SELECT COALESCE(SUM(
    CASE rating
      WHEN 5 THEN 2
      WHEN 4 THEN 1
      WHEN 3 THEN 0
      WHEN 2 THEN -1
      WHEN 1 THEN -2
    END
  ), 0)
  FROM reviews
  WHERE reviewee_id = p.id
) + (
  SELECT COUNT(*) * 1
  FROM orders o
  JOIN products pr ON o.product_id = pr.id
  WHERE pr.user_id = p.id AND o.status = 'DONE'
);
```

## ğŸ¯ í–¥í›„ ê°œì„  ì‚¬í•­

1. **êµ¬ë§¤ì ì˜¨ë„**: êµ¬ë§¤ ì™„ë£Œ ì‹œì—ë„ ì˜¨ë„ ì¦ê°€
2. **ì˜¨ë„ íˆìŠ¤í† ë¦¬**: ì˜¨ë„ ë³€í™” ì´ë ¥ ì¶”ì 
3. **ì˜¨ë„ ë°°ì§€**: íŠ¹ì • ì˜¨ë„ ë‹¬ì„± ì‹œ ë°°ì§€ ë¶€ì—¬
4. **ì˜¨ë„ ë­í‚¹**: ì˜¨ë„ ìˆœìœ„ í‘œì‹œ
5. **ì˜¨ë„ ì•Œë¦¼**: ì˜¨ë„ ë³€í™” ì‹œ ì•Œë¦¼

